<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="box">
        <div class="form">
            <h2>HAHA HAHA HAHA HAHA</h2>
            <form>
                <table id="data-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>IP Address</th>
                            <th>Computer Name</th>
                            <th>Time</th>
                            <th>User Profile</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data rows will be inserted here -->
                    </tbody>
                </table>
            </form>
        </div>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-analytics.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCon2VW8eSnddBpsvvwcklKKPiUGM2D8SI",
            authDomain: "get-user-ip.firebaseapp.com",
            databaseURL: "https://get-user-ip-default-rtdb.firebaseio.com",
            projectId: "get-user-ip",
            storageBucket: "get-user-ip.appspot.com",
            messagingSenderId: "225384730787",
            appId: "1:225384730787:web:d4f619fa7fe2f8d0f16f16",
            measurementId: "G-LRF0B51SC0"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);

        // Reference to the database location where your data is stored
        const dataRef = ref(database, 'idnumber'); // Updated path to match your data structure

        // Fetch data from Firebase and display it in the table
        onValue(dataRef, (snapshot) => {
            const data = snapshot.val();
            console.log(data); // Check data structure in console
            const tableBody = document.querySelector('#data-table tbody');
            tableBody.innerHTML = ''; // Clear the table before inserting new data

            if (data) {
                for (const key in data) {
                    if (data.hasOwnProperty(key)) {
                        const entry = data[key];
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${entry.hostName || 'N/A'}</td>
                            <td>${entry.IPAddress || 'N/A'}</td>
                            <td>${entry.computername || 'N/A'}</td>
                            <td>${entry.time || 'N/A'}</td>
                            <td>${entry.userProfile || 'N/A'}</td>
                        `;
                        tableBody.appendChild(row);
                    }
                }
            } else {
                tableBody.innerHTML = '<tr><td colspan="7">No data available</td></tr>';
            }
        }, {
            onlyOnce: true
        });
    </script>
</body>
</html>
